# Domain Randomization Configuration - Tier 2
# Intermediate randomization: Tier 1 + object positions + camera noise

domain_randomization:
  tier: 2
  description: "Intermediate domain randomization - lighting, textures, object positions, and camera effects"
  enabled: true

lighting:
  # Enhanced lighting randomization compared to Tier 1
  intensity_variance: 0.5      # ±50% from base intensity (increased from 0.4)
  color_temp_variance: 2500    # ±2500K from base color temperature (increased from 2000)
  num_variants: 8              # More lighting setups (increased from 5)
  dynamic_lights: true         # Enable moving/dynamic lights
  min_intensity: 2000          # Minimum light intensity (reduced for variety)
  max_intensity: 18000         # Maximum light intensity (increased)
  base_color_temp: 5500        # Base color temperature in Kelvin

  # Enhanced lighting pattern variations
  patterns:
    - type: "directional"      # Directional light (sun-like)
      intensity_range: [4000, 14000]
      color_temp_range: [3500, 7500]
      movement_enabled: true   # Lights can move in Tier 2
      movement_range: [5, 5, 2] # Max movement in X,Y,Z (meters)
    - type: "point"            # Point lights (lamps)
      intensity_range: [1500, 10000]
      color_temp_range: [2500, 7000]
      movement_enabled: true
      movement_range: [2, 2, 1]
    - type: "area"             # Area lights (overhead panels)
      intensity_range: [5000, 18000]
      color_temp_range: [4500, 8500]
      movement_enabled: false  # Area lights typically fixed
    - type: "spot"             # Spot lights
      intensity_range: [3000, 12000]
      color_temp_range: [4000, 8000]
      movement_enabled: true
      movement_range: [3, 3, 1]

textures:
  # Enhanced texture randomization compared to Tier 1
  material_randomization: true
  num_variants: 12             # More texture variants (increased from 8)
  variation_intensity: 0.4     # More variation (increased from 0.3)
  texture_blending: true       # Enable texture blending in Tier 2
  texture_interpolation: true  # Enable smooth texture transitions

  # Enhanced material property ranges
  material_properties:
    roughness_range: [0.05, 0.95]  # Wider range (expanded from [0.1, 0.9])
    metallic_range: [0.0, 0.5]     # Higher maximum metallic (increased from 0.3)
    specular_range: [0.05, 0.7]    # Wider range (expanded from [0.1, 0.5])
    albedo_variance: 0.3           # More color variation (increased from 0.2)

  # Expanded texture library configuration
  texture_library:
    floor:
      - "concrete_01"
      - "concrete_02"
      - "concrete_03"
      - "concrete_04"
      - "concrete_05"
      - "tile_01"
      - "tile_02"
      - "tile_03"
      - "wood_01"
      - "wood_02"
      - "carpet_01"
      - "metal_01"
    walls:
      - "cement_wall_01"
      - "cement_wall_02"
      - "cement_wall_03"
      - "brick_wall_01"
      - "brick_wall_02"
      - "metal_wall_01"
      - "metal_wall_02"
      - "drywall_01"
      - "drywall_02"
    objects:
      - "cardboard_box_01"
      - "cardboard_box_02"
      - "cardboard_box_03"
      - "metal_surface_01"
      - "metal_surface_02"
      - "plastic_surface_01"
      - "plastic_surface_02"
      - "wood_surface_01"
      - "fabric_surface_01"

objects:
  # Object position and rotation randomization (NEW for Tier 2)
  static_only: false           # Allow some object movement in Tier 2
  position_jitter: 0.1         # ±10cm position jitter (NEW)
  rotation_jitter: 15.0        # ±15° rotation jitter (NEW)
  random_removal_prob: 0.1     # 10% chance to remove objects (NEW)

  # Enhanced object appearance randomization
  appearance:
    color_variance: 0.25       # More color variation (increased from 0.15)
    texture_switching: true
    wear_simulation: true      # Enable wear simulation in Tier 2 (NEW)
    aging_effects: true        # Add aging effects (NEW)

  # Object distribution randomization
  distribution:
    clustered_placement: true  # Allow clustered object placement
    uniform_placement: true    # Also allow uniform placement
    random_placement: true     # Allow completely random placement
    cluster_radius: 2.0        # Radius for clustered placement (meters)

  # Physics randomization (NEW for Tier 2)
  physics:
    friction_variance: 0.2     # ±20% friction coefficient variation
    restitution_variance: 0.15 # ±15% restitution (bounciness) variation
    mass_variance: 0.1         # ±10% mass variation for dynamic objects

camera:
  # Camera randomization (NEW for Tier 2)
  noise_sigma: 0.02            # 2% noise level (NEW)
  noise_model: "gaussian"      # Type of noise to apply
  exposure_randomization: true # Enable exposure randomization (NEW)
  exposure_range: [0.5, 1.5]   # Exposure multiplier range
  focus_randomization: true    # Enable focus randomization (NEW)
  focus_range: [0.8, 1.2]      # Focus distance multiplier
  distortion_randomization: true # Enable distortion randomization
  distortion_range: [0.0, 0.1] # Distortion coefficient range

  # Camera parameter randomization
  parameters:
    focal_length_variance: 0.05  # ±5% focal length variation
    aperture_variance: 0.05      # ±5% aperture variation
    sensor_size_variance: 0.02   # ±2% sensor size variation

environment:
  # Environmental randomization (NEW for Tier 2)
  weather_effects: false       # Still disabled (Tier 3 feature)
  atmospheric_scattering: false # Still disabled (Tier 3 feature)
  fog_enabled: false           # Still disabled (Tier 3 feature)

  # Simple environmental effects
  simple_effects:
    dust_particles: true       # Add dust/haze particles
    minor_obstructions: true   # Add minor environmental obstructions
    lighting_flicker: 0.05     # 5% probability of lighting flicker

performance:
  # Adjusted performance settings for Tier 2
  max_performance_impact: 15.0  # Higher impact allowed (increased from 10%)
  validation_frequency: 25      # More frequent validation (increased from 50)
  adaptive_randomization: true
  performance_recovery: true    # Enable performance recovery mechanisms

quality_control:
  # Quality assurance for Tier 2 randomization
  min_texture_quality: 0.6     # Slightly lower threshold (decreased from 0.7)
  max_light_bleeding: 0.15     # Higher tolerance (increased from 0.1)
  shadow_quality_threshold: 0.7 # Slightly lower threshold (decreased from 0.8)

  # Additional quality checks for Tier 2
  texture_resolution_check: true
  lighting_consistency_check: true
  object_placement_validation: true

logging:
  # Enhanced logging for Tier 2
  enable_logging: true
  log_level: "INFO"
  log_file: "randomization_tier2.log"
  log_statistics: true
  log_object_changes: true     # Log object position/rotation changes
  log_camera_changes: true     # Log camera parameter changes
  log_performance: true        # Log performance metrics

validation:
  # Validation parameters for Tier 2
  target_diversity_score: 0.75 # Higher target (increased from 0.6)
  min_visual_difference: 0.15  # Higher minimum (increased from 0.1)
  consistency_checks: true
  validation_metrics:
    - "texture_diversity"
    - "lighting_variation"
    - "object_placement_diversity"
    - "camera_effect_diversity"
    - "scene_composition_variety"

  # Tier 2 specific validation
  object_randomization_validation: true
  camera_randomization_validation: true
  physics_randomization_validation: true

safety:
  # Safety constraints for Tier 2
  max_object_movement: 0.5     # Maximum object movement (meters)
  min_camera_distance: 0.1     # Minimum distance from objects (meters)
  collision_avoidance: true    # Ensure no invalid collisions
  physics_stability: true      # Ensure physics remains stable

# Scene-specific configurations for warehouse environments
warehouse_specific:
  # Warehouse-specific randomization constraints
  aisle_preservation: true     # Keep main aisles clear
  safety_zone_preservation: true # Keep safety zones clear
  equipment_zone_preservation: true # Keep equipment zones consistent

  # Warehouse-specific object randomization
  object_constraints:
    forklifts:
      - position_range: [[-20, 20], [-12, 12], [0, 3]]  # Constrain forklift positions
      - probability: 0.3  # 30% chance to spawn forklift
    pallets:
      - position_range: [[-25, 25], [-15, 15], [0, 1]]  # Ground level only
      - clustering_enabled: true
    boxes:
      - position_range: [[-25, 25], [-15, 15], [0.2, 5]] # Above ground
      - stacking_enabled: true
      - max_stack_height: 3

# Training-specific configurations
training:
  # Configuration optimized for training data diversity
  diversity_focused: true
  consistency_penalty: 0.1     # Penalty for low diversity
  novelty_reward: 0.05         # Reward for novel scene configurations
  coverage_target: 0.8         # Target coverage of possible configurations